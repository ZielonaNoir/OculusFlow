补充PRD

这份文档整合了我们之前讨论的所有需求、交互逻辑、技术选型（即梦AI）以及你提供的参考素材信息。它已准备好交付给 Antigravity 团队进行开发。

---

# 👁️ Oculus Flow · 全视之流 | 产品需求文档 (PRD)

| 项目名称 | Oculus Flow (京东详情页 AI 生成引擎) |
| --- | --- |
| **版本号** | v1.0.0 |
| **适用平台** | Antigravity Component |
| **核心能力** | 爆款逻辑拆解 + 自动化文案生成 + 即梦AI绘图流 |
| **状态** | **待开发** |

---

## 1. 项目概述 (Overview)

**Oculus Flow** 是一个集成在 Antigravity 中的 AI 工作流组件。它旨在解决电商详情页制作周期长、策划难度大的痛点。
用户只需输入基础产品信息，系统通过 **5秒静默触发 (Debounce)** 机制，自动调用 LLM 拆解出符合京东（JD.com）爆款逻辑的 **8大视觉模块**，并联动 **即梦AI (Jimeng)** 生成对应的高清营销素材，最终拼合成一张高转化率的长图。

---

## 2. 交互与界面逻辑 (UI/UX)

### 2.1 界面布局

采用 **左右分栏 (Split View)** 布局：

* **左侧 (Input Zone):** 结构化表单，用于录入产品原始信息。
* **右侧 (Preview Zone):** 瀑布流卡片，展示 LLM 生成的策划方案（包含文案 + 绘图 Prompt）。

### 2.2 核心交互：静默触发

* **机制：** 监听左侧表单的 `onChange` 事件。
* **阈值：** 当用户停止输入超过 **5000ms (5秒)** 时，自动触发后端 LLM 请求。
* **状态反馈：** 请求期间，右侧区域显示 **Skeleton (骨架屏)** 动画，提示文案：“Oculus 正在拆解爆款逻辑...”。

### 2.3 样板控制

* **滑块组件：** 用户可通过滑块选择生成方案的数量（范围 1-3，默认 1）。
* **方案应用：** 点击右侧任意方案的“应用”按钮，系统锁定该方案数据，进入图片生成阶段。

---

## 3. 数据输入规范 (Input Schema)

前端需维护以下表单字段：

| 字段 Key | 类型 | 说明 | 示例值 |
| --- | --- | --- | --- |
| `productName` | String | 产品名称 | 京东京造男士复合维生素 |
| `coreSpecs` | String | 核心规格参数 | 180片/瓶，19种营养，蓝帽认证 |
| `targetAudience` | String | 目标画像 | 熬夜加班、缺乏运动、饮食不规律的男性 |
| `painPoints` | Textarea | 痛点描述 | 精力差、易疲劳、脸色不好、抵抗力差 |
| `trustEndorsement` | String | 信任背书 | 京东金榜TOP1，累计评价100万+ |
| `productImage` | File/URL | **产品主图(必须)** | *用户上传的白底透图，用于图生图* |
| `visualStyle` | Select | 视觉风格 | 科技蓝金 (默认) / 极简医疗 / 活力橙色 |
| `sampleCount` | Number | 生成数量 | 1 - 3 |

---

## 4. 核心逻辑：8大模块拆解与生成策略

系统需将详情页拆解为以下 8 个模块。每个模块对应不同的 **文案策略** 和 **图片生成模式**。

### 📊 模块生成策略表

| 模块 ID | 模块名称 | 文案逻辑 (LLM) | 图片生成模式 (Jimeng Service) | 关键 Prompt 策略 |
| --- | --- | --- | --- | --- |
| **M01** | **首屏海报** | 强调“金榜”、“TOP1”、“销量” | **图生图 (Img2Img)**<br>

<br>*(强参考)* | **参考图：** 用户上传的产品图<br>

<br>**Prompt：** 金色奖杯，巨大的数字1，悬浮文字位，C4D质感。 |
| **M02** | **痛点场景** | 4个扎心的生活场景（加班/腰疼） | **文生图 (Txt2Img)** | **Prompt：** 黑白摄影，高噪点，压抑感，办公室/深夜场景，无产品露出。 |
| **M03** | **核心方案** | “只需1片”，能量爆发 | **图生图 (Img2Img)**<br>

<br>*(中参考)* | **Prompt：** 产品在发光底座，周围环绕分子结构/能量光环，背景有巨大的数字。 |
| **M04** | **成分对比** | 食物等量代换 (如: 1片=5个橙子) | **文生图 (Txt2Img)**<br>

<br>*(仅素材)* | **策略：** AI 仅生成“新鲜水果/食物的高清图”。<br>

<br>**合成：** 表格线和文字由**前端 CSS 渲染**。 |
| **M05** | **科学原理** | 人体吸收与作用机理 | **文生图 (Txt2Img)** | **Prompt：** 发光的人体剪影 (X-ray风格)，指向关节/大脑的特写气泡，微观细胞图。 |
| **M06** | **工艺体验** | 包衣技术，吞服体验 | **图生图 (Img2Img)** | **Prompt：** 药片/内容物微距特写，光滑质感；下方配真人微笑吞服的生活照。 |
| **M07** | **参数表** | 详细规格、禁忌人群 | **前端渲染 (No AI)** | **策略：** 纯 HTML/Canvas 渲染，确保文字绝对清晰、准确。 |
| **M08** | **页尾保障** | 京东物流、正品保证 | **前端渲染 (No AI)** | **策略：** 使用预制的标准组件（Icon + 文本）。 |

---

## 5. 技术架构与 API 对接

### 5.1 LLM 系统提示词 (System Prompt)

*注意：针对即梦AI优化，要求 LLM 输出**中文提示词**。*

```markdown
# Role
你是一个精通京东电商视觉营销的专家。

# Task
根据用户输入，生成 {sampleCount} 套详情页策划方案。

# Output Format
JSON 格式。

# Image Prompt Rules (Critical)
为“即梦AI (Dreamina)”生成**中文提示词**。
结构公式：[主体] + [环境] + [光影] + [渲染风格] + [画质修饰词]。
示例："特写，京东京造维生素白瓶，放置在悬浮的蓝色科技圆台上，背景是流动的金色数据流，OC渲染，8k分辨率，超高清。"

```

### 5.2 图像生成服务 (Jimeng Integration)

使用火山引擎 (Volcengine) SDK。

* **配置来源:** `.env.local` (AK/SK 已配置)
* **服务模型:** `即梦AI-图片生成4.0` (`high_quality_generation_v4`)
* **调用封装:**

```typescript
// 伪代码示例
interface ModuleConfig {
  prompt: string;      // LLM 生成的中文 Prompt
  refImage?: string;   // 用户上传的产品图 URL (用于 M01, M03, M06)
}

async function generateModuleImage(config: ModuleConfig) {
  const payload = {
    req_key: "high_quality_generation_v4",
    prompt: config.prompt,
    // 如果有参考图，则开启图生图模式
    ...(config.refImage && {
      image_urls: [config.refImage],
      strength: 0.65 // 保持产品相似度的关键参数
    }),
    logo_info: { add_logo: false } // 去水印
  };
  // Call Volcengine API...
}

```

---

## 6. 附录：参考素材库 (Reference Assets)

以下是必须“复刻”的视觉标准，开发时请参考这些切片的构图与逻辑。

* **视觉标杆 (Gold Standard):** 京东京造男士复合维生素 180片。
* **素材清单:**
* **Slice 1-2 (M01 首屏):** 金色奖杯、TOP1 徽章、促销氛围。
* **Slice 4 (M02 痛点):** 四宫格黑白滤镜，表现疲劳/压力。
* **Slice 3 (M03 方案):** 产品居中，蓝色能量球环绕。
* **Slice 5 (M04 成分):** 左侧文字，右侧实物（猕猴桃/牛肉）对比图。
* **Slice 6-8 (M05 原理):** 蓝色人体剪影，连接微观细胞/骨骼特写。
* **Slice 9 (M06 工艺):** 药片微距特写 + 真人服用场景。
* **Slice 10 (M07 参数):** 蓝底黑字的标准表格。



---

## 7. 开发检查清单 (Checklist)

1. [ ] **前端：** 完成左右分栏布局与表单构建。
2. [ ] **前端：** 实现 5s Debounce 触发器。
3. [ ] **后端：** 配置 LLM Prompt，确保输出中文绘图指令。
4. [ ] **后端：** 封装火山引擎 SDK，打通即梦 4.0 接口。
5. [ ] **后端：** 实现图生图逻辑（判断模块类型，按需传入 `image_urls`）。
6. [ ] **测试：** 使用 `.env.local` 中的 AK/SK 跑通一次完整的 API 调用。