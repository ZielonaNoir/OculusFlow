[{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\api\\apparel-agent\\generate\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\api\\campaign-monitor\\generate\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\api\\host-scheduling\\generate\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\api\\nanobanana\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\api\\oculus\\generate\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\api\\oculus\\image\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\api\\oculus\\models\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\api\\stripe\\checkout\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\api\\stripe\\webhook\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[877,880],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[877,880],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":122,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4620,4623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4620,4623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\nimport Stripe from 'stripe';\r\nimport { stripe } from '@/lib/stripe';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\n// We must use the Service Role Key in webhooks to bypass RLS securely\r\nconst supabaseAdmin = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_ROLE_KEY!\r\n);\r\n\r\nconst endpointSecret = process.env.STRIPE_WEBHOOK_SECRET;\r\n\r\nexport async function POST(req: Request) {\r\n  const body = await req.text();\r\n  const signature = req.headers.get('stripe-signature');\r\n\r\n  if (!signature || !endpointSecret) {\r\n    return NextResponse.json(\r\n      { error: 'Missing stripe signature or endpoint secret' },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  let event: Stripe.Event;\r\n\r\n  try {\r\n    event = stripe.webhooks.constructEvent(body, signature, endpointSecret);\r\n  } catch (err: any) {\r\n    console.error(`Webhook signature verification failed: ${err.message}`);\r\n    return NextResponse.json({ error: `Webhook Error: ${err.message}` }, { status: 400 });\r\n  }\r\n\r\n  try {\r\n    switch (event.type) {\r\n      case 'checkout.session.completed': {\r\n        const session = event.data.object as Stripe.Checkout.Session;\r\n\r\n        // Retrieve user ID passed during checkout creation\r\n        const userId = session.client_reference_id;\r\n        if (!userId) {\r\n          console.error('No client_reference_id found in session', session.id);\r\n          break;\r\n        }\r\n\r\n        const mode = session.metadata?.type || session.mode; // our custom metadata or stripe mode\r\n        const planId = session.metadata?.planId;\r\n        const stripeCustomerId = session.customer as string;\r\n\r\n        if (mode === 'subscription' || planId === 'pro-30-days') {\r\n          // Handle new subscription or 30-day buyout (Oculus Pro)\r\n          const expiresAt = new Date();\r\n          expiresAt.setMonth(expiresAt.getMonth() + 1); // rough 1 month from now\r\n\r\n          const { error } = await supabaseAdmin\r\n            .from('user_credits')\r\n            .update({\r\n              is_pro: true,\r\n              pro_expires_at: expiresAt.toISOString(),\r\n              stripe_customer_id: stripeCustomerId,\r\n            })\r\n            .eq('user_id', userId);\r\n\r\n          if (error) throw error;\r\n          console.log(`[Subscription/Pro Buyout] User ${userId} upgraded to PRO`);\r\n        } else if (mode === 'payment') {\r\n          // Handle one-time payment (Credits Pack)\r\n          const amountTotal = session.amount_total; // e.g. 1000 for $10.00\r\n          \r\n          let creditsToAdd = 0;\r\n          if (amountTotal === 1000) creditsToAdd = 100; // $10 for 100\r\n          if (amountTotal === 4000) creditsToAdd = 500; // $40 for 500\r\n\r\n          if (creditsToAdd > 0) {\r\n            // Because Supabase doesn't easily support dynamic atomic increments like generic SQL out of the box using update(),\r\n            // it's best to call an RPC function or simply fetch then update for a quick implementation.\r\n            \r\n            // Step 1: get current balance\r\n            const { data, error: fetchError } = await supabaseAdmin\r\n              .from('user_credits')\r\n              .select('credit_balance')\r\n              .eq('user_id', userId)\r\n              .single();\r\n\r\n            if (fetchError) throw fetchError;\r\n\r\n            // Step 2: update\r\n            const newBalance = (data?.credit_balance || 0) + creditsToAdd;\r\n            const { error: updateError } = await supabaseAdmin\r\n              .from('user_credits')\r\n              .update({ credit_balance: newBalance, stripe_customer_id: stripeCustomerId })\r\n              .eq('user_id', userId);\r\n\r\n            if (updateError) throw updateError;\r\n            console.log(`[Credits] Added ${creditsToAdd} credits to User ${userId}. New Balance: ${newBalance}`);\r\n          }\r\n        }\r\n        break;\r\n      }\r\n      \r\n      // Handle subscription cancellations/updates later\r\n      case 'customer.subscription.deleted': {\r\n        const subscription = event.data.object as Stripe.Subscription;\r\n        const stripeCustomerId = subscription.customer as string;\r\n\r\n        const { error } = await supabaseAdmin\r\n          .from('user_credits')\r\n          .update({\r\n            is_pro: false,\r\n            pro_expires_at: null,\r\n          })\r\n          .eq('stripe_customer_id', stripeCustomerId);\r\n\r\n        if (error) console.error('Failed to update subscription deletion', error);\r\n        break;\r\n      }\r\n      default:\r\n        console.log(`Unhandled event type: ${event.type}`);\r\n    }\r\n\r\n    return NextResponse.json({ received: true });\r\n  } catch (err: any) {\r\n    console.error(`Webhook handler error: ${err.message}`);\r\n    return NextResponse.json({ error: 'Webhook handler failed' }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\api\\supplement-agent\\generate\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\apparel-agent\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\auth\\callback\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\billing\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":12,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, Suspense } from \"react\";\r\nimport { useSearchParams, useRouter } from \"next/navigation\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Icon } from \"@iconify/react\";\r\nimport Link from \"next/link\";\r\nimport { toast } from \"sonner\";\r\n\r\nfunction BillingContent() {\r\n  const searchParams = useSearchParams();\r\n  const router = useRouter();\r\n  const success = searchParams.get(\"success\") === \"true\";\r\n  const canceled = searchParams.get(\"canceled\") === \"true\";\r\n  const sessionId = searchParams.get(\"session_id\");\r\n\r\n  useEffect(() => {\r\n    if (success) {\r\n      toast.success(\"支付成功！您的账户信用额度已更新。\", {\r\n        description: sessionId ? `订单 ID: ${sessionId.substring(0, 15)}...` : undefined,\r\n      });\r\n    } else if (canceled) {\r\n      toast.error(\"支付已取消\", {\r\n        description: \"您可以随时返回定价页面重新选择。\",\r\n      });\r\n    }\r\n  }, [success, canceled, sessionId]);\r\n\r\n  return (\r\n    <div className=\"flex min-h-[calc(100vh-80px)] items-center justify-center p-4\">\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className=\"relative w-full max-w-md overflow-hidden rounded-2xl border border-white/10 bg-zinc-900/50 p-8 backdrop-blur-xl\"\r\n      >\r\n        {/* Decorative Background */}\r\n        <div className=\"absolute -right-20 -top-20 h-40 w-40 rounded-full bg-indigo-500/10 blur-3xl\" />\r\n        <div className=\"absolute -bottom-20 -left-20 h-40 w-40 rounded-full bg-purple-500/10 blur-3xl\" />\r\n\r\n        <div className=\"relative z-10 text-center\">\r\n          <div className=\"mb-6 flex justify-center\">\r\n            <div className={`flex h-20 w-20 items-center justify-center rounded-full border-2 ${\r\n              success ? \"border-emerald-500/50 bg-emerald-500/10 text-emerald-400\" : \r\n              canceled ? \"border-amber-500/50 bg-amber-500/10 text-amber-400\" :\r\n              \"border-white/20 bg-white/5 text-zinc-400\"\r\n            }`}>\r\n              <Icon \r\n                icon={success ? \"lucide:check-circle\" : canceled ? \"lucide:alert-circle\" : \"lucide:credit-card\"} \r\n                className=\"h-10 w-10\" \r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <h1 className=\"mb-2 text-2xl font-bold text-white\">\r\n            {success ? \"支付成功\" : canceled ? \"支付已取消\" : \"账单详情\"}\r\n          </h1>\r\n          <p className=\"mb-8 text-sm text-zinc-400\">\r\n            {success \r\n              ? \"感谢您的购买！系统正在处理您的订阅或信用积分，通常在几秒钟内完成。\" \r\n              : canceled \r\n              ? \"未能完成支付流程。如果您遇到了技术问题，请随时联系我们。\"\r\n              : \"查看您的充值记录和订阅状态。\"\r\n            }\r\n          </p>\r\n\r\n          <div className=\"space-y-3\">\r\n            <Link\r\n              href=\"/\"\r\n              className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-white px-6 py-3 text-sm font-semibold text-black transition-all hover:bg-zinc-200 active:scale-95\"\r\n            >\r\n              <Icon icon=\"lucide:layout-dashboard\" className=\"h-4 w-4\" />\r\n              返回控制台\r\n            </Link>\r\n            <Link\r\n              href=\"/pricing\"\r\n              className=\"flex w-full items-center justify-center gap-2 rounded-xl border border-white/10 bg-white/5 px-6 py-3 text-sm font-medium text-white transition-all hover:bg-white/10 active:scale-95\"\r\n            >\r\n              <Icon icon=\"lucide:credit-card\" className=\"h-4 w-4\" />\r\n              再次查看定价\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function BillingPage() {\r\n  return (\r\n    <Suspense fallback={\r\n      <div className=\"flex min-h-screen items-center justify-center\">\r\n        <div className=\"h-8 w-8 animate-spin rounded-full border-2 border-indigo-500 border-t-transparent\" />\r\n      </div>\r\n    }>\r\n      <BillingContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\campaign-monitor\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\components\\ImageSlicer.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":210,"column":29,"nodeType":"JSXOpeningElement","endLine":210,"endColumn":115,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":304,"column":42,"nodeType":"JSXOpeningElement","endLine":304,"endColumn":177,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\components\\MagneticButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\components\\NanoBananaChat.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\host-scheduling\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\login\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\oculus-flow\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\pricing\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\supplement-agent\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\template-library\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\app\\template-library\\page.tsx:68:5\n  66 |   useEffect(() => {\n  67 |     // eslint-disable-next-line\n> 68 |     refreshSchemes();\n     |     ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  69 |   }, [refreshSchemes]);\n  70 |\n  71 |   return (","line":68,"column":5,"nodeType":null,"endLine":68,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\AppSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\SidebarLayout.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\SidebarLayout.tsx:21:9\n  19 |       if (stored !== null) {\n  20 |         // eslint-disable-next-line\n> 21 |         setCollapsed(JSON.parse(stored));\n     |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  22 |       }\n  23 |     } catch {\n  24 |       // ignore","line":21,"column":9,"nodeType":null,"endLine":21,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\UserProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\apparel-agent\\AgentPipelineTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\apparel-agent\\ApparelInputForm.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":109,"column":19,"nodeType":"JSXOpeningElement","endLine":109,"endColumn":89,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\apparel-agent\\StructuredOutputPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\campaign-monitor\\CampaignDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\host-scheduling\\HostInputPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\oculus-flow\\ArkImageGenOptionsPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\oculus-flow\\InputForm.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":428,"column":15,"nodeType":"JSXOpeningElement","endLine":438,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":529,"column":19,"nodeType":"JSXOpeningElement","endLine":534,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":825,"column":11,"nodeType":"JSXOpeningElement","endLine":829,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\oculus-flow\\PreviewPanel.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[747,750],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[747,750],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":173,"column":13,"nodeType":"JSXOpeningElement","endLine":177,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":244,"column":13,"nodeType":"JSXOpeningElement","endLine":248,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":567,"column":13,"nodeType":"JSXOpeningElement","endLine":567,"endColumn":81,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":615,"column":19,"nodeType":"JSXOpeningElement","endLine":619,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\oculus-flow\\PromptTemplateManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\oculus-flow\\SettingsPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\oculus-flow\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\supplement-agent\\SupplementInputForm.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":169,"column":21,"nodeType":"JSXOpeningElement","endLine":169,"endColumn":91}],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":257,"column":15,"nodeType":"JSXOpeningElement","endLine":257,"endColumn":90,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Icon } from \"@iconify/react\";\r\nimport MagneticButton from \"@/app/components/MagneticButton\";\r\n\r\ninterface SupplementInputFormProps {\r\n  onGenerate: (data: {\r\n    productName: string;\r\n    coreIngredients: string;\r\n    targetAudience: string;\r\n    healthGoals: string;\r\n    images: File[];\r\n    imagePreviews: string[];\r\n  }) => void;\r\n  onStop: () => void;\r\n  isGenerating: boolean;\r\n  onFourViewsGenerated?: (urls: string[]) => void;\r\n  onPreviewsChange?: (previews: string[]) => void;\r\n}\r\n\r\nexport function SupplementInputForm({ onGenerate, onStop, isGenerating, onFourViewsGenerated, onPreviewsChange }: SupplementInputFormProps) {\r\n  const [productName, setProductName] = useState(\"汤臣倍健 蛋白质粉 蛋白粉 600g\");\r\n  const [coreIngredients, setCoreIngredients] = useState(\"规格：600g/罐\\n蛋白质含量：每份(25g)含蛋白质≥18g\\n主要成分：乳清蛋白、大豆蛋白\\n口味：原味\\n适用人群：成人\\n净含量：600g\\n保质期：24个月\\n生产标准：GB/T 22570\\n信任背书：汤臣倍健品牌成立30年，国内营养补充剂领导品牌；京东自营旗舰店，月销10万+；通过GMP认证，国家食品安全标准生产；多次获得京东健康年度优质品牌奖\\n促销模式 (选填)：买2罐享9折，满299元赠摇摇杯；京东物流次日达，支持7天无理由退换\\n视觉风格：极简医疗 (Medical Clean)\");\r\n  const [targetAudience, setTargetAudience] = useState(\"25-45岁注重健康的都市白领、健身爱好者、中老年人群；追求高效补充优质蛋白质、维持肌肉量、提升免疫力的消费者\");\r\n  const [healthGoals, setHealthGoals] = useState(\"日常饮食蛋白质摄入不足，难以通过食物满足运动后肌肉修复需求；普通蛋白粉口感差、溶解性不好；担心添加剂多、成分不透明；中老年人肌肉流失加速，需要安全可靠的蛋白补充方案\");\r\n  const [images, setImages] = useState<File[]>([]);\r\n  const [previews, setPreviews] = useState<string[]>([]);\r\n  const [fourViewImages, setFourViewImages] = useState<string[]>([]);\r\n  const [fourViewLoading, setFourViewLoading] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Load from cache on mount\r\n  useEffect(() => {\r\n    try {\r\n      const cached = localStorage.getItem(\"supplement_agent_product_context\");\r\n      if (cached) {\r\n        const parsed = JSON.parse(cached);\r\n        if (parsed.productName) setProductName(parsed.productName);\r\n        if (parsed.coreIngredients) setCoreIngredients(parsed.coreIngredients);\r\n        if (parsed.imagePreviews) setPreviews(parsed.imagePreviews);\r\n        if (parsed.fourViewImages) setFourViewImages(parsed.fourViewImages);\r\n      }\r\n    } catch { /* ignore */ }\r\n  }, []);\r\n\r\n  // Notify parent whenever previews change (e.g. upload new image or delete)\r\n  useEffect(() => {\r\n    if (onPreviewsChange) {\r\n      onPreviewsChange(previews);\r\n    }\r\n  }, [previews, onPreviewsChange]);\r\n\r\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files.length > 0) {\r\n      const newFiles = Array.from(e.target.files);\r\n      setImages(prev => [...prev, ...newFiles]);\r\n      // Convert to base64 so they can be used as API refImages\r\n      newFiles.forEach(file => {\r\n        const reader = new FileReader();\r\n        reader.onload = (ev) => {\r\n          const b64 = ev.target?.result as string;\r\n          setPreviews(prev => [...prev, b64]);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      });\r\n    }\r\n  };\r\n\r\n  const removeImage = (index: number) => {\r\n    setImages(prev => prev.filter((_, i) => i !== index));\r\n    setPreviews(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const onSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!productName.trim() || !coreIngredients.trim()) return;\r\n    onGenerate({ productName, coreIngredients, targetAudience, healthGoals, images, imagePreviews: previews });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={onSubmit} className=\"flex flex-col gap-5 flex-1\">\r\n      <div className=\"space-y-4\">\r\n        {/* Product Name */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"productName\" className=\"text-zinc-300\">产品名称</Label>\r\n          <Input\r\n            id=\"productName\"\r\n            value={productName}\r\n            onChange={(e) => setProductName(e.target.value)}\r\n            disabled={isGenerating}\r\n            placeholder=\"例如：进口鱼油软胶囊、益生菌冻干粉\"\r\n            className=\"bg-black/30 border-white/10 text-white placeholder:text-zinc-600 focus-visible:ring-teal-500\"\r\n          />\r\n        </div>\r\n\r\n        {/* Core Ingredients */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"coreIngredients\" className=\"text-zinc-300\">核心成分 / 规格参数</Label>\r\n          <Textarea\r\n            id=\"coreIngredients\"\r\n            value={coreIngredients}\r\n            onChange={(e) => setCoreIngredients(e.target.value)}\r\n            disabled={isGenerating}\r\n            rows={10}\r\n            placeholder=\"例如：NMN 500mg，NAD+ 前体，β-烟酰胺单核苷酸\"\r\n            className=\"bg-black/30 border-white/10 text-white placeholder:text-zinc-600 focus-visible:ring-teal-500 font-mono text-sm resize-none\"\r\n          />\r\n          <p className=\"text-[10px] text-zinc-500\">填入品牌方语言即可，AI 将负责&ldquo;降维翻译&rdquo;为消费者人话。</p>\r\n        </div>\r\n\r\n        {/* Target Audience */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"targetAudience\" className=\"text-zinc-300\">目标客群 (标签化输入)</Label>\r\n          <Textarea\r\n            id=\"targetAudience\"\r\n            value={targetAudience}\r\n            onChange={(e) => setTargetAudience(e.target.value)}\r\n            disabled={isGenerating}\r\n            rows={2}\r\n            placeholder=\"例如：中老年人；40-65岁；注重心血管\"\r\n            className=\"bg-black/30 border-white/10 text-white placeholder:text-zinc-600 focus-visible:ring-teal-500 font-mono text-sm resize-none\"\r\n          />\r\n        </div>\r\n\r\n        {/* Health Goals */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"healthGoals\" className=\"text-zinc-300\">健康功效诉求</Label>\r\n          <Textarea\r\n            id=\"healthGoals\"\r\n            value={healthGoals}\r\n            onChange={(e) => setHealthGoals(e.target.value)}\r\n            disabled={isGenerating}\r\n            rows={4}\r\n            placeholder=\"例如：护心血管、降甘油三酯、促进睡眠\"\r\n            className=\"bg-black/30 border-white/10 text-white placeholder:text-zinc-600 focus-visible:ring-teal-500 text-sm font-mono resize-none\"\r\n          />\r\n        </div>\r\n\r\n        {/* Image Upload */}\r\n        <div className=\"space-y-2 mt-2\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <Label className=\"text-zinc-300\">产品图 (可选)</Label>\r\n            <span className=\"text-[10px] text-zinc-500\">{images.length} / 5</span>\r\n          </div>\r\n          <div\r\n            onClick={() => !isGenerating && fileInputRef.current?.click()}\r\n            className={`border-2 border-dashed rounded-xl p-5 flex flex-col items-center justify-center cursor-pointer transition-colors ${\r\n              isGenerating\r\n                ? \"border-zinc-800 opacity-50 cursor-not-allowed\"\r\n                : previews.length > 0\r\n                ? \"border-teal-500/50 bg-teal-500/5 hover:border-teal-500 hover:bg-teal-500/10\"\r\n                : \"border-zinc-700 hover:border-teal-500 hover:bg-teal-500/5 bg-white/5\"\r\n            } min-h-[120px]`}\r\n          >\r\n            {previews.length === 0 ? (\r\n              <>\r\n                <Icon icon=\"lucide:pill\" className=\"h-7 w-7 text-zinc-400 mb-2\" />\r\n                <span className=\"text-sm font-medium text-zinc-300\">添加产品外观图</span>\r\n                <span className=\"text-xs text-zinc-500 mt-1\">AI 将协助解析外包装信息</span>\r\n              </>\r\n            ) : (\r\n              <div className=\"flex gap-3 flex-wrap justify-center w-full\">\r\n                {previews.map((src, idx) => (\r\n                  <div key={idx} className=\"relative group w-16 h-16 rounded-md overflow-hidden ring-1 ring-white/10 bg-black shrink-0\">\r\n                    <img src={src} alt=\"preview\" className=\"w-full h-full object-cover\" />\r\n                    {!isGenerating && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={(e) => { e.stopPropagation(); removeImage(idx); }}\r\n                        className=\"absolute top-1 right-1 bg-black/60 backdrop-blur-md rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500/80\"\r\n                      >\r\n                        <Icon icon=\"lucide:x\" className=\"h-3 w-3 text-white\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n                {previews.length < 5 && !isGenerating && (\r\n                  <div className=\"w-16 h-16 rounded-md border border-dashed border-zinc-600 bg-white/5 flex flex-col items-center justify-center shrink-0 hover:border-teal-400 hover:text-teal-400 text-zinc-500 transition-colors\">\r\n                    <Icon icon=\"lucide:plus\" className=\"h-6 w-6\" />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              multiple\r\n              accept=\"image/*\"\r\n              className=\"hidden\"\r\n              onChange={handleImageUpload}\r\n              disabled={isGenerating}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Four-view generation section — shown when product image(s) are uploaded */}\r\n      {previews.length > 0 && (\r\n        <div className=\"mt-4 space-y-3 px-1\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm font-medium text-zinc-300 flex items-center gap-2\">\r\n              <Icon icon=\"lucide:cube\" className=\"h-4 w-4 text-teal-400\" />\r\n              产品四视图\r\n            </span>\r\n            <button\r\n              type=\"button\"\r\n              disabled={fourViewLoading || isGenerating}\r\n              onClick={async () => {\r\n                setFourViewLoading(true);\r\n                setFourViewImages([]);\r\n                try {\r\n                  const res = await fetch(\"/api/oculus/image\", {\r\n                    method: \"POST\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify({\r\n                      prompt: \"产品包装四视图，一张图展示同一产品的正面、背面、左侧面、右侧面四个角度，2x2网格布局，纯白背景，专业产品拍摄风格，高清晰度。\",\r\n                      moduleType: \"four_view\",\r\n                      modelId: \"doubao-seedream-4-5-251128\",\r\n                      refImages: previews.slice(0, 3),\r\n                      imageOptions: {\r\n                        size: \"2048x2048\",\r\n                        watermark: false,\r\n                      },\r\n                    }),\r\n                  });\r\n                  const data = await res.json() as { image_url: string | null; status: string; urls?: string[] };\r\n                  const urls: string[] = data.urls ?? (data.image_url ? [data.image_url] : []);\r\n                  setFourViewImages(urls);\r\n                  onFourViewsGenerated?.(urls);\r\n                } catch { /* ignore */ } finally {\r\n                  setFourViewLoading(false);\r\n                }\r\n              }}\r\n              className=\"text-xs px-3 py-1.5 rounded-lg border border-teal-500/30 bg-teal-500/10 text-teal-400 hover:bg-teal-500/20 transition-all flex items-center gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {fourViewLoading ? (\r\n                <><Icon icon=\"lucide:loader-2\" className=\"h-3.5 w-3.5 animate-spin\" /> 生成中...</>\r\n              ) : (\r\n                <><Icon icon=\"lucide:wand-2\" className=\"h-3.5 w-3.5\" /> 即梦出四视图</>\r\n              )}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Single composite four-view image */}\r\n          {fourViewLoading && (\r\n            <div className=\"aspect-video rounded-lg bg-white/5 border border-white/8 flex items-center justify-center\">\r\n              <Icon icon=\"lucide:loader-2\" className=\"h-8 w-8 text-zinc-600 animate-spin\" />\r\n            </div>\r\n          )}\r\n          {fourViewImages.length > 0 && !fourViewLoading && (\r\n            <div className=\"relative group rounded-lg overflow-hidden border border-white/10 bg-black\">\r\n              {/* eslint-disable-next-line @next/next/no-img-element */}\r\n              <img src={fourViewImages[0]} alt=\"四视图\" className=\"w-full object-contain\" />\r\n              <a\r\n                href={fourViewImages[0]}\r\n                download=\"四视图.jpg\"\r\n                target=\"_blank\"\r\n                rel=\"noreferrer\"\r\n                className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/70 text-white text-xs px-2.5 py-1.5 rounded-lg flex items-center gap-1.5 backdrop-blur-sm\"\r\n              >\r\n                <Icon icon=\"lucide:download\" className=\"h-3.5 w-3.5\" /> 下载\r\n              </a>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"mt-auto pt-4 flex gap-3\">\r\n        {isGenerating ? (\r\n          <MagneticButton\r\n            onClick={onStop}\r\n            type=\"button\"\r\n            className=\"flex-1 h-12 bg-red-500/10 text-red-500 border border-red-500/20 rounded-xl font-medium flex items-center justify-center gap-2 hover:bg-red-500/20 transition-colors\"\r\n          >\r\n            <Icon icon=\"lucide:square\" className=\"h-4 w-4\" />\r\n            紧急中断\r\n          </MagneticButton>\r\n        ) : (\r\n          <MagneticButton\r\n            type=\"submit\"\r\n            className=\"flex-1 h-12 bg-linear-to-r from-teal-500 to-emerald-500 text-white rounded-xl font-medium flex items-center justify-center gap-2 hover:opacity-90 active:scale-[0.98] shadow-lg shadow-teal-500/25\"\r\n          >\r\n            <Icon icon=\"lucide:flask-conical\" className=\"h-5 w-5\" />\r\n            交由 AI 策划保健品全案\r\n          </MagneticButton>\r\n        )}\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\supplement-agent\\SupplementOutputPanel.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":407,"column":41,"nodeType":"JSXOpeningElement","endLine":407,"endColumn":137,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":425,"column":41,"nodeType":"JSXOpeningElement","endLine":425,"endColumn":142,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":451,"column":29,"nodeType":"JSXOpeningElement","endLine":455,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\supplement-agent\\SupplementPipelineTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\background-noise.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\sparkles.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\lib\\pricing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\lib\\stripe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\scripts\\check-stripe-account.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[573,576],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[573,576],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Stripe from 'stripe';\r\n\r\n// Bun automatically loads .env files, so no need for dotenv\r\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY!);\r\n\r\nasync function checkAccount() {\r\n  try {\r\n    const account = await stripe.accounts.retrieve();\r\n    console.log('Account ID:', account.id);\r\n    console.log('Country:', account.country);\r\n    console.log('Default Currency:', account.default_currency);\r\n    \r\n    // Check capabilities for alipay and wechat_pay\r\n    console.log('Capabilities:', JSON.stringify(account.capabilities, null, 2));\r\n    \r\n  } catch (err: any) {\r\n    console.error('Error:', err.message);\r\n  }\r\n}\r\n\r\ncheckAccount();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\scripts\\setup-test-prices.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1304,1307],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1304,1307],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Stripe from 'stripe';\r\n\r\nconst key = process.env.STRIPE_SECRET_KEY;\r\n\r\nif (!key) {\r\n  console.error('STRIPE_SECRET_KEY not found');\r\n  process.exit(1);\r\n}\r\n\r\nconst stripe = new Stripe(key);\r\n\r\nasync function setup() {\r\n  try {\r\n    console.log('--- Creating Test Mode Products & Prices ---');\r\n    \r\n    // 1. Oculus Pro\r\n    const prodPro = await stripe.products.create({\r\n      name: 'Oculus Pro (Test)',\r\n      description: 'Premium subscription for OculusFlow AI Agents (Test Mode).',\r\n    });\r\n    const pricePro = await stripe.prices.create({\r\n      product: prodPro.id,\r\n      unit_amount: 1900,\r\n      currency: 'usd',\r\n      recurring: { interval: 'month' },\r\n    });\r\n    console.log(`✅ Oculus Pro Price ID: ${pricePro.id}`);\r\n\r\n    // 2. 100 Credits\r\n    const prodCredits = await stripe.products.create({\r\n      name: '100 Credits (Test)',\r\n      description: '100 High-Speed Credits for OculusFlow AI Agents (Test Mode).',\r\n    });\r\n    const priceCredits = await stripe.prices.create({\r\n      product: prodCredits.id,\r\n      unit_amount: 1000,\r\n      currency: 'usd',\r\n    });\r\n    console.log(`✅ 100 Credits Price ID: ${priceCredits.id}`);\r\n\r\n    console.log('\\n--- SUCCESS ---');\r\n    console.log('Copy these IDs into your PRICING_PLANS in app/pricing/page.tsx');\r\n  } catch (err: any) {\r\n    console.error('❌ FAILURE:', err.message);\r\n  }\r\n}\r\n\r\nsetup();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\scripts\\test-stripe-key.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1549,1552],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1549,1552],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Stripe from 'stripe';\r\n\r\n// Bun automatically loads .env.local\r\nconst key = process.env.STRIPE_SECRET_KEY;\r\n\r\nif (!key) {\r\n  console.error('STRIPE_SECRET_KEY not found in process.env');\r\n  process.exit(1);\r\n}\r\n\r\n// Check for invisible characters\r\nconst cleanKey = key.trim();\r\nif (cleanKey !== key) {\r\n  console.log('WARNING: Key had leading/trailing whitespace');\r\n}\r\n\r\nconsole.log('--- Key Debug Info ---');\r\nconsole.log('Raw length:', key.length);\r\nconsole.log('Clean length:', cleanKey.length);\r\nconsole.log('Prefix:', key.substring(0, 8));\r\nconsole.log('Suffix:', key.substring(key.length - 8));\r\nconsole.log('Hex representation of prefix:', Buffer.from(key.substring(0, 8)).toString('hex'));\r\n\r\nconst stripe = new Stripe(cleanKey);\r\n\r\nasync function test() {\r\n  try {\r\n    console.log('\\n--- Testing Stripe authentication ---');\r\n    const account = await stripe.accounts.retrieve();\r\n    console.log('✅ SUCCESS: Authenticated successfully!');\r\n    console.log('Account ID:', account.id);\r\n    console.log('Business Name:', account.business_profile?.name || 'N/A');\r\n    \r\n    console.log('\\n--- Testing Price IDs ---');\r\n    const prices = await stripe.prices.list({ limit: 10 });\r\n    if (prices.data.length === 0) {\r\n      console.log('⚠️ No prices found in this account.');\r\n    } else {\r\n      console.log('Found prices:');\r\n      prices.data.forEach(p => {\r\n        console.log(`- ID: ${p.id} | Amount: ${p.unit_amount ? p.unit_amount / 100 : 0} ${p.currency.toUpperCase()} | Type: ${p.type}`);\r\n      });\r\n    }\r\n  } catch (err: any) {\r\n    console.error('\\n❌ FAILURE:', err.message);\r\n    if (err.raw) {\r\n      console.error('Error Code:', err.code);\r\n      console.error('Error Type:', err.rawType);\r\n      console.error('Request ID:', err.requestId);\r\n    }\r\n  }\r\n}\r\n\r\ntest();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\tailwind.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\types\\apparel.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\types\\campaign-monitor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\types\\host-scheduling.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\types\\supplement.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\utils\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\utils\\supabase\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\a4061\\Desktop\\RongYue\\OculusFlow\\utils\\supabase\\server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
